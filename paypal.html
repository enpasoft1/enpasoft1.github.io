<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Buy me a coffee ‚Äì support my work</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="If my work saves you time, consider buying me a coffee. Thank you!">
  <meta name="theme-color" content="#ffc439">

  <!-- PWA -->
  <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiQnV5IG1lIGEgY29mZmVlIiwic2hvcnRfbmFtZSI6IkNvZmZlZSIsInN0YXJ0X3VybCI6Ii4iLCJiYWNrZ3JvdW5kX2NvbG9yIjoiI2ZhZmFmYSIsInRoZW1lX2NvbG9yIjoiI2ZmYzQzOSIsImRpc3BsYXkiOiJzdGFuZGFsb25lIn0=">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75'>‚òï</text></svg>">

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --accent:#ffc439;
      --dark:#1a1a1a;
      --light:#fafafa;
      --card:#ffffff;
      --radius:16px;
      --shadow:0 10px 30px rgba(0,0,0,.08);
    }
    @media (prefers-color-scheme:dark){
      :root{--dark:#fafafa;--light:#121212;--card:#1e1e1e}
    }
    [data-theme="dark"]{--dark:#fafafa;--light:#121212;--card:#1e1e1e}
    [data-theme="light"]{--dark:#1a1a1a;--light:#fafafa;--card:#ffffff}

    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}
    body{display:flex;align-items:center;justify-content:center;min-height:100vh;background:var(--light);color:var(--dark);padding:1rem;transition:background .3s ease}
    .card{width:100%;max-width:420px;background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:2.5rem 2rem;text-align:center}
    .logo{width:80px;height:80px;margin:0 auto 1rem;border-radius:50%;background:var(--accent);display:grid;place-content:center;font-size:45px}
    h1{font-size:1.5rem;margin-bottom:.25rem}
    p{margin-bottom:1.5rem;color:#555}
    .amounts{display:flex;gap:.5rem;justify-content:center;margin-bottom:1rem;flex-wrap:wrap}
    .amounts button{flex:1 1 80px;padding:.6rem .5rem;border:2px solid var(--accent);background:transparent;color:var(--dark);border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s ease}
    .amounts button:hover,.amounts button:focus{background:var(--accent)}
    .amounts button.selected{background:var(--accent);color:#000}
    #custom-input{max-width:120px;margin:0 auto 1rem;display:none}
    #custom-input input{width:100%;padding:.6rem;border:2px solid var(--accent);border-radius:8px;text-align:center;font-size:1rem}
    #paypal-btn-container{min-height:45px}
    footer{margin-top:2rem;font-size:.75rem;color:#888}
    .theme-toggle{position:absolute;top:1rem;right:1rem;background:transparent;border:none;font-size:1.2rem;cursor:pointer;color:var(--dark)}
    @media (prefers-reduced-motion:reduce){*{transition:none!important}}
  </style>
</head>
<body>
  <button class="theme-toggle" aria-label="Toggle theme" title="Toggle theme">üåó</button>

  <div class="card">
    <div class="logo">‚òï</div>
    <h1>Buy me a coffee</h1>
    <p>If my work saves you time, consider supporting me. Thank you! üôè</p>

    <div class="amounts">
      <button data-val="3">$3</button>
      <button data-val="5">$5</button>
      <button data-val="10">$10</button>
      <button id="custom-btn">Custom</button>
    </div>

    <div id="custom-input">
      <input id="custom-amount" type="number" min="1" step="0.5" placeholder="5">
    </div>

    <div id="paypal-btn-container"></div>

    <footer>Secured by PayPal ¬∑ Any card or PayPal balance.</footer>
  </div>

  <!-- PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=BAAg-WR-pOIy-DtWiY31ANY4fIPJ9arM5FIIxaGTIndXsrU_J6LHbNgU3Vc6cQyApkL9bikgHY1YCB8oKA&components=hosted-buttons&disable-funding=venmo&currency=USD"></script>

  <script>
    /* ---------- theme ---------- */
    const toggle = document.querySelector('.theme-toggle');
    const stored = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', stored);
    toggle.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme');
      const next = current === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
    });

    /* ---------- amount logic ---------- */
    const buttons = document.querySelectorAll('.amounts button[data-val]');
    const customBtn = document.getElementById('custom-btn');
    const customInput = document.getElementById('custom-input');
    const customField = document.getElementById('custom-amount');
    let selectedAmount = 3;

    function selectAmount(val) {
      selectedAmount = val;
      buttons.forEach(b => b.classList.toggle('selected', Number(b.dataset.val) === val));
      customInput.style.display = 'none';
    }
    buttons.forEach(b => b.addEventListener('click', () => selectAmount(Number(b.dataset.val))));
    customBtn.addEventListener('click', () => {
      buttons.forEach(b => b.classList.remove('selected'));
      customInput.style.display = 'block';
      customField.focus();
      selectedAmount = Number(customField.value) || 5;
    });
    customField.addEventListener('input', () => selectedAmount = Number(customField.value) || 5);

    /* ---------- PayPal ---------- */
    window.paypal.Buttons({
      style: { color: 'gold', shape: 'pill', label: 'pay' },
      createOrder: (data, actions) => {
        return actions.order.create({
          purchase_units: [{
            amount: { value: selectedAmount.toFixed(2) }
          }]
        });
      },
      onApprove: (data, actions) => {
        return actions.order.capture().then(details => {
          alert('Thank you ' + details.payer.name.given_name + ' ‚òï');
        });
      },
      onError: err => console.error(err)
    }).render('#paypal-btn-container');
  </script>
</body>
</html>
